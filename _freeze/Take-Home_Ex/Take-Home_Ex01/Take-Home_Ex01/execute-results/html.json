{
  "hash": "f50fc3621f328ebffd76dc48426c118b",
  "result": {
    "markdown": "---\ntitle: \"Take-Home_Ex01\"\nauthor: \"Teo Wee Siang Roy\"\ndate: \"May 01, 2025\"\ndate-modified: \"last-modified\"\nformat:\n  html:\n    toc: true\n    theme: default\neditor: visual\nexecute: \n  eval: true\n  echo: true\n  warning: false\nfreeze: true\n---\n\n\n## Editorial Brief -- Visualising Singapore's Resident Population (2024)\n\nAs the graphical editor of a media company, I have been tasked to design up to **three impactful data visualisations** to support an article on Singapore's resident population as of **June 2024**.\n\nThe aim is to help readers quickly understand demographic trends using clear and accessible visuals based on official statistics.\n\n### Data Source\n\n[Department of Statistics Singapore (DOS)](https://www.singstat.gov.sg/find-data/search-by-theme/population/geographic-distribution/latest-data): Planning Area and Subzone, Single Year of Age (0--100+), Sex (Male, Female, Total), Resident Population counts (as of June 2024)\n\n### Visualisation Objectives\n\n-   **Relevance**: Support editorial narratives (e.g. ageing population, regional differences)\n-   **Clarity**: Easy for general readers to understand\n-   **Compactness**: Limited to a maximum of three charts\n\n### Data Preparation Summary\n\n-   Cleaned and filtered for relevant fields (Age, Sex, Planning Area)\n-   Converted columns to numeric where needed (e.g. Age, Population)\n-   Aggregated by region and demographic groups for visual storytelling\n\n## Load packages\n\nWe begin by loading all required R packages using the `pacman::p_load()` function. These packages support data wrangling, visualisation, animation, and layout composition for this take-home exercise.\n\n-   **tidyverse**: Core set of packages for data manipulation, transformation, and visualisation using `ggplot2`.\n-   **readxl**: To import Excel files (`.xlsx`), such as the population dataset used in this exercise.\n-   **haven**: Enables importing datasets from software like SPSS, SAS, and Stata.\n-   **ggrepel**: Prevents overlapping text labels in `ggplot2` plots, improving readability.\n-   **ggthemes**: Provides additional `ggplot2` themes for publication-quality charts.\n-   **patchwork**: Combines multiple `ggplot2` plots into a single composite layout.\n-   **ggridges**: Creates ridgeline plots to visualise distributions across categories.\n-   **ggdist**: Supports visualisations of distributions and uncertainty (e.g. dot + interval plots).\n-   **scales**: Useful for formatting axis labels (e.g. commas, percentages, date breaks).\n-   **plotly**: Adds interactivity to static plots made with `ggplot2`, enabling zoom, hover, etc.\n-   **gganimate**: Enables animation of `ggplot2` plots across time or other variables.\n-   **gifski**: Required by `gganimate` to render animations into GIF format.\n-   **gapminder**: A sample dataset often used for animated population plots and trend visualisation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, readxl, haven, ggrepel, \nggthemes, patchwork, ggridges, ggdist, scales, plotly, \ngganimate, gifski, gapminder)\n```\n:::\n\n\n## Import Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop_data <- read_csv(\"TH01/data/cleaned_population_2024.csv\")\n```\n:::\n\n\n### Data Cleaning Summary\n\nTo prepare the dataset for visualisation, the following data cleaning steps were applied:\n\n-   **Skipped Metadata Rows**\\\n    The original Excel file contained header and metadata rows. We used `skiprows = 2` to access only the actual data records.\n\n-   **Dropped Incomplete Rows**\\\n    Removed rows where any key fields were missing:\n\n    -   `Subzone`\n    -   `Age`\n    -   `Sex`\n    -   `Population (2024)`\\\n        This ensures only valid, complete records are included in the analysis.\n\n-   **Renamed Columns for Clarity**\\\n    Replaced generic or auto-generated column names (e.g., `Unnamed: x`, `2024`) with:\n\n    -   `Planning Area`, `Subzone`, `Age`, `Sex`, `Population`\n\n-   **Converted to Numeric Types**\\\n    Converted the `Age` and `Population` columns to numeric using coercion.\\\n    Non-numeric values were turned into `NA` and filtered out.\n\n-   **Removed Rows with Missing Age or Population**\\\n    Any rows with missing (`NA`) values in `Age` or `Population` were dropped after conversion.\n\n## Data Parameters and Description\n\n| **Field Name** | **Field Description**                                                        |\n|--------------------|----------------------------------------------------|\n| Planning Area  | Administrative regions in Singapore (e.g. Bedok, Ang Mo Kio, Tampines, etc.) |\n| Subzone        | Subdivisions within each Planning Area                                       |\n| Age            | Age of residents in single years (0 to 100+)                                 |\n| Sex            | Gender category: Male, Female, or Total                                      |\n| Population     | Number of residents for the given demographic group in June 2024             |\n\n# EDA 1: Population Pyramid (Age-Sex Distribution)\n\n\n::: {.cell}\n\n```{.r .cell-code}\npyramid_data <- pop_data %>%\n  filter(Sex %in% c(\"Males\", \"Females\")) %>%\n  mutate(Population = ifelse(Sex == \"Males\", -Population, Population))\n\nggplot(pyramid_data, aes(x = Age, y = Population, fill = Sex)) +\n  geom_bar(stat = \"identity\", width = 0.9) +\n  coord_flip() + scale_x_continuous(limits = c(0, 100)) +\n  scale_y_continuous(labels = function(x) comma(abs(x))) +\n  scale_fill_manual(\n    values = c(\"Males\" = \"#00bfc4\", \"Females\" = \"#f8766d\"),\n    breaks = c(\"Males\", \"Females\"),  # ensures correct order in legend\n    labels = c(\"Males\", \"Females\")\n  ) +\n  labs(\n    title = \"Population Pyramid of Singapore (2024)\",\n    subtitle = \"Male population is shown on the left, female on the right\",\n    x = \"Age\",\n    y = \"Population (count)\",\n    fill = \"Gender Distribution\"\n  ) +\n  theme_minimal(base_family = \"Helvetica\") +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 12, hjust = 0.5),\n    axis.text = element_text(size = 10),\n    axis.title = element_text(size = 11),\n    legend.position = \"top\",\n    legend.title = element_text(size = 10, face = \"bold\"),\n    legend.text = element_text(size = 9),\n    plot.margin = margin(10, 10, 10, 10)\n  )\n```\n\n::: {.cell-output-display}\n![](Take-Home_Ex01_files/figure-html/unnamed-chunk-3-1.png){width=768}\n:::\n:::\n\n\n## EDA 1 Insights\n\n- **Balanced Gender Counts in Ages 0–30**  \n  The population pyramid shows that the male and female populations are nearly equal in every single year of age from 0 to 30, indicating no significant gender disparity in the younger cohorts.\n\n- **Highest Population Concentration in Ages 35–54**  \n  The widest horizontal bars are found in the 35–54 age range for both sexes, making this the most populous segment of the resident population.\n\n- **Greater Female Population in Ages 70 and Above**  \n  Beginning at around age 70, the length of the bars representing females becomes consistently longer than those of males. The difference becomes especially large in the 80–100+ range, where females clearly outnumber males.\n\n- **Smaller Cohorts Below Age 15**  \n  The pyramid base (ages 0–14) is narrower compared to middle age groups, reflecting that younger age cohorts are smaller in size relative to those born in earlier decades.\n\n# EDA 2: Top 10 Planning Areas by Total Population and Elderly Population (Age 65+)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_total <- pop_data %>%\n  filter(Sex == \"Total\") %>%\n  group_by(`Planning Area`) %>%\n  summarise(TotalPopulation = sum(Population, na.rm = TRUE)) %>%\n  arrange(desc(TotalPopulation)) %>%\n  slice_max(TotalPopulation, n = 10)\n\nplot_total <- ggplot(top_total, aes(x = reorder(`Planning Area`, TotalPopulation), y = TotalPopulation)) +\n  geom_col(fill = \"#2b8cbe\") +\n  geom_text(aes(label = scales::comma(TotalPopulation)), hjust = -0.1, size = 3) +\n  coord_flip() +\n  scale_y_continuous(labels = label_comma(), expand = expansion(mult = c(0, 0.1))) +\n  labs(title = \"Top 10 Planning Areas by Total Population\") +\n  theme_minimal(base_family = \"Helvetica\") +\n  theme(\n    plot.title = element_text(face = \"bold\", size = 14),\n    axis.title = element_blank(),\n    panel.grid.major.y = element_blank()\n  )\n\n# Top 10 by Elderly (Age 65+)\ntop_elderly <- pop_data %>%\n  filter(Sex == \"Total\", Age >= 65) %>%\n  group_by(`Planning Area`) %>%\n  summarise(ElderlyPopulation = sum(Population, na.rm = TRUE)) %>%\n  arrange(desc(ElderlyPopulation)) %>%\n  slice_max(ElderlyPopulation, n = 10)\n\nplot_elderly <- ggplot(top_elderly, aes(x = reorder(`Planning Area`, ElderlyPopulation), y = ElderlyPopulation)) +\n  geom_col(fill = \"#e34a33\") +\n  geom_text(aes(label = scales::comma(ElderlyPopulation)), hjust = -0.1, size = 3) +\n  coord_flip() +\n  scale_y_continuous(labels = label_comma(), expand = expansion(mult = c(0, 0.1))) +\n  labs(title = \"Top 10 Planning Areas by Elderly Population (65+)\") +\n  theme_minimal(base_family = \"Helvetica\") +\n  theme(\n    plot.title = element_text(face = \"bold\", size = 14),\n    axis.title = element_blank(),\n    panel.grid.major.y = element_blank()\n  )\n\nplot_total / plot_elderly + \n  plot_annotation(title = \"Comparison of Population Distribution by Planning Area (2024)\",\n                  theme = theme(plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5)))\n```\n\n::: {.cell-output-display}\n![](Take-Home_Ex01_files/figure-html/unnamed-chunk-4-1.png){width=864}\n:::\n:::\n\n## EDA 2 Insights\n\n- **Bedok, Tampines, and Jurong West Appear in Both Rankings**  \n  These three planning areas rank in the **top 10 for both total population and elderly population (65+)**, indicating they are high-density towns with large absolute numbers of seniors.\n\n- **Central Area Ranks High in Total Population but Not in Elderly Count**  \n  While the Central Area appears in the total population chart, it is **absent from the elderly chart**, suggesting a **lower proportion of elderly residents** — possibly due to its mixed commercial-residential nature.\n\n- **Ang Mo Kio and Bukit Merah Appear Only in the Elderly Ranking**  \n  These areas do **not rank among the top 10 in total population** but have **high elderly counts**, implying a relatively **older resident base** compared to newer towns.\n\n- **Woodlands and Sengkang Rank High in Total but Not Elderly Population**  \n  These towns appear in the **total population top 10** but are **absent in the elderly top 10**, indicating a **younger demographic composition**.\n\n- **Elderly Population Distribution is More Uniform**  \n  Compared to the total population, the **elderly population values are closer in range**, suggesting a **more even spread of seniors** across the top-ranked areas.\n\n# EDA 3 : Age Group Composition by Planning Area\n\n::: {.cell}\n\n```{.r .cell-code}\nage_levels <- c(\"Elderly (65+)\", \"Middle-aged Adults (40–64)\",\n                \"Young Adults (20–39)\", \"Teenagers (13–19)\",\n                \"Children (0–12)\")\n\nage_colors <- c(\n  \"Elderly (65+)\" = \"#a6d854\",\n  \"Middle-aged Adults (40–64)\" = \"#e78ac3\",\n  \"Young Adults (20–39)\" = \"#8da0cb\",\n  \"Teenagers (13–19)\" = \"#fc8d62\",\n  \"Children (0–12)\" = \"#66c2a5\"\n)\n\npop_grouped <- pop_data %>%\n  filter(Sex == \"Total\") %>%\n  mutate(Age_Group = case_when(\n    Age >= 0  & Age <= 12  ~ \"Children (0–12)\",\n    Age >= 13 & Age <= 19  ~ \"Teenagers (13–19)\",\n    Age >= 20 & Age <= 39  ~ \"Young Adults (20–39)\",\n    Age >= 40 & Age <= 64  ~ \"Middle-aged Adults (40–64)\",\n    Age >= 65              ~ \"Elderly (65+)\"\n  )) %>%\n  mutate(Age_Group = factor(Age_Group, levels = age_levels)) %>%\n  group_by(`Planning Area`, Age_Group) %>%\n  summarise(Population = sum(Population), .groups = \"drop\")\n\npop_percent <- pop_grouped %>%\n  mutate(`Planning Area` = trimws(`Planning Area`)) %>%\n  filter(!is.na(`Planning Area`), `Planning Area` != \"\", toupper(`Planning Area`) != \"NA\") %>%\n  group_by(`Planning Area`) %>%\n  mutate(Total = sum(Population),\n         Share = Population / Total) %>%\n  ungroup()\n\nordering <- pop_percent %>%\n  filter(Age_Group == \"Elderly (65+)\", `Planning Area` != \"Total\") %>%\n  arrange(desc(Share)) %>%\n  pull(`Planning Area`)\n\npop_percent$`Planning Area` <- factor(\n  pop_percent$`Planning Area`,\n  levels = c(\"Total\", ordering)\n)\n\npop_percent$Age_Group <- factor(pop_percent$Age_Group, levels = rev(age_levels))\n\nggplot(pop_percent, aes(x = `Planning Area`, y = Share, fill = Age_Group)) +\n  geom_col(width = 0.8) +\n  geom_text(aes(label = scales::percent(Share, accuracy = 1)),\n            position = position_stack(vjust = 0.5),\n            size = 5, color = \"white\") +\n  scale_y_continuous(labels = percent_format(accuracy = 1)) +\n  scale_fill_manual(\n    values = age_colors,\n    breaks = age_levels\n  ) +\n  coord_flip() +\n  labs(\n    title = \"Age Group Composition by Planning Area (2024)\",\n    subtitle = \"Bars and legend start from Elderly (65+)\",\n    x = \"Planning Area\",\n    y = \"Proportion of Total Population\",\n    fill = \"Age Group\"\n  ) +\n  theme_minimal(base_family = \"Helvetica\") +\n  theme(\n    plot.title = element_text(face = \"bold\", size = 16, hjust = 0.5),\n    plot.subtitle = element_text(size = 12, hjust = 0.5),\n    legend.position = \"bottom\",\n    legend.title = element_text(size = 10, face = \"bold\"),\n    legend.text = element_text(size = 9),\n    axis.text = element_text(size = 9)\n  )\n```\n\n::: {.cell-output-display}\n![](Take-Home_Ex01_files/figure-html/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n\n## EDA 3 Insights\n\n\n- **Higher Elderly Proportions**  \n  Planning areas such as **Outram**, **Bukit Merah**, and **Ang Mo Kio** have visibly higher proportions of residents aged **65 and above**.\n\n- **Younger Population Profiles**  \n  Areas like **Punggol**, **Sembawang**, and **Tengah** show larger proportions of **Children (0–12)** and **Young Adults (20–39)**, with smaller Elderly segments.\n\n- **Middle-aged Adults Dominate Most Areas**  \n  The **40–64** age group forms the largest proportion in most planning areas, indicating a dominant working-age population.\n\n- **\"Total\" Row Reflects National Age Structure**  \n  The bar labeled **\"Total\"** reflects the overall distribution of age groups across all planning areas and serves as a baseline for comparison.\n\n- **Smaller Young Dependent Segments**  \n  In most planning areas, **Children** and **Teenagers** together constitute less than **25%** of the population.\n\n- **Balanced Age Distribution in Selected Areas**  \n  Some areas such as **Jurong West** and **Woodlands** display relatively balanced proportions across all five age groups.",
    "supporting": [
      "Take-Home_Ex01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}