{
  "hash": "0d2e017c8b7699a6a4986dd01a9a2dec",
  "result": {
    "markdown": "---\ntitle: \"Take-Home_Ex01 part 2\"\nauthor: \"Teo Wee Siang Roy\"\ndate: \"May 08, 2025\"\ndate-modified: \"last-modified\"\nformat:\n  html:\n    toc: true\n    theme: default\n    code-fold: show\neditor: visual\nexecute: \n  eval: true\n  echo: true\n  warning: false\nfreeze: true\n---\n\n# Reviewed Submission\n\nThis review is based on the submission by **Sandra Jacob**, available at:  \nüîó [https://sandrajacob-isss608.netlify.app/takehome_exercises/takehome_ex01/takehomeex01](https://sandrajacob-isss608.netlify.app/takehome_exercises/takehome_ex01/takehomeex01)\n\n# Load packages\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, haven,\n               ggrepel, ggthemes,\n               ggridges, ggdist,colorspace,ggdist,\n               patchwork, scales, ggplot2, \n               matrixStats, treemapify, showtext)\n```\n:::\n\n\n# Load dataset and data processing\n\n::: {.cell}\n\n```{.r .cell-code}\nrespopagesex2024 <- read_csv(\"TH01_2/data/respopagesex2024.csv\")\nshow_col_types = FALSE\n\nknitr::kable(head(respopagesex2024))\n```\n\n::: {.cell-output-display}\n|PA         |SZ                     |Age |Sex     | Pop| Time|\n|:----------|:----------------------|:---|:-------|---:|----:|\n|Ang Mo Kio |Ang Mo Kio Town Centre |0   |Males   |  10| 2024|\n|Ang Mo Kio |Ang Mo Kio Town Centre |0   |Females |  10| 2024|\n|Ang Mo Kio |Ang Mo Kio Town Centre |1   |Males   |  10| 2024|\n|Ang Mo Kio |Ang Mo Kio Town Centre |1   |Females |  10| 2024|\n|Ang Mo Kio |Ang Mo Kio Town Centre |2   |Males   |  10| 2024|\n|Ang Mo Kio |Ang Mo Kio Town Centre |2   |Females |  10| 2024|\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrespopagesex2024[duplicated(respopagesex2024),]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 0 √ó 6\n# ‚Ñπ 6 variables: PA <chr>, SZ <chr>, Age <chr>, Sex <chr>, Pop <dbl>,\n#   Time <dbl>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplanning_areas <- read_csv(\"TH01_2/data/Planning_areas_of_Singapore_2.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nrespop_with_region <- respopagesex2024 %>%\n  left_join(planning_areas, by = c(\"PA\" = \"Name (English)\"))\n\nrespop_cleaned <- respop_with_region %>%\n  select(-`Time`, -`Malay`, -`Chinese`, -`Pinyin`, -`Tamil`, -`Area (km2)`, -`Population`, -`Density (/km2)`, -`Subzones`)\n```\n:::\n\n\n# Gender Ratio Analysis by Region (1st plot)\n\n## ‚úÖ Three Good Design Principles Applied\n\n1. **Clear and Descriptive Title with Proper Axis Labels**\n\nThe chart‚Äôs title ‚Äî *\"Male and Female Population by Region\"* ‚Äî succinctly conveys the purpose of the visualisation. Coupled with clearly labeled axes (*\"Region\"* and *\"Total Population\"*), this design adheres to fundamental **graphical integrity** and supports rapid comprehension. It aligns with best practices for enhancing **cognitive accessibility** in data graphics.\n\n2. **Strategic Use of Color for Categorical Differentiation**\n\nThe use of high-contrast, intuitive colors (maroon for Females and navy for Males) effectively encodes the **categorical variable (Sex)**. This leverages **pre-attentive visual processing**, enabling users to instantly distinguish between gender groups. The visual encoding is both **aesthetically pleasing and functionally efficient**, which is crucial in comparative visualisations.\n\n3. **Inclusion of Percentage Labels to Add Analytical Depth**\n\nEach bar is annotated with percentage labels that represent the proportion of each gender within its respective region. This additional layer of information transforms a basic bar chart into a more **analytically enriched visual**, allowing users to compare both absolute values and relative gender compositions simultaneously. This reflects the principle of **\"deriving insight\" rather than merely displaying raw data\"** ‚Äî a key goal in visual analytics.\n\n\n## ‚ùå Three Areas for Further Improvement\n\n1. **Label Overlap and Legibility Concerns**\n\nWhile the inclusion of percentage labels is commendable, their placement **above the bars** results in visual congestion‚Äîespecially in regions like *North-East* and *West*, where the height differences between segments are minimal. This diminishes readability and increases cognitive load. To resolve this:\n\n- Place labels **inside the bars** using `position_stack(vjust = 0.5)`\n- Use a **horizontal layout** to increase label spacing\n- Reduce font size or apply `ggrepel` for smart label adjustment\n\n2. **Lack of Alignment Between Data and Message**\n\nAlthough percentage labels are presented, the **bar height still encodes absolute values**. \nThis can lead viewers to focus on population differences rather than proportional differences. \nA **100% stacked bar chart** would better align with the intent to highlight **gender balance within each region**.\n\n3. **Suboptimal Chart Type for Comparative Ratios**\n\nGrouped bar charts are ideal for comparing totals but are less effective for showing **composition within a group**. \nA **normalized horizontal stacked bar chart** would:\n\n- More clearly show **gender proportion**\n- Eliminate vertical label collisions\n- Follow a natural **left-to-right reading flow** that supports comparison\n\n## Graph as reference first graph \n\n::: {.cell}\n\n```{.r .cell-code}\ngender_summary_long <- respop_cleaned %>%\n  group_by(Region, Sex) %>%\n  summarise(Total_Pop = sum(Pop), .groups = \"drop\")\n\n#Calculate total population per region\ngender_summary_long <- gender_summary_long %>%\n  group_by(Region) %>%\n  mutate(\n    Region_Total = sum(Total_Pop),\n    Percent = (Total_Pop / Region_Total) * 100\n  )\n\n#Plot side-by-side bars\nggplot(gender_summary_long, aes(x = Region, y = Total_Pop, fill = Sex)) +\n  geom_col(position = \"dodge\") +\n  geom_text(\n    aes(label = paste0(round(Percent, 1), \"%\")),\n    position = position_dodge(width = 0.9),\n    vjust = -0.5,\n    size = 3, family = \"nunito\"\n  ) +\n  labs(\n    title = \"Male and Female Population by Region\",\n    x = \"Region\",\n    y = \"Total Population\"\n  ) +\n  scale_y_continuous(labels = scales::comma) +\n  theme_minimal(base_family = \"nunito\") + theme(axis.text.x = element_text(angle = 90, vjust = 0.5),plot.title = element_text(hjust = 0.5, size = 15, face = \"bold\", family = \"nunito\")) +\n  scale_fill_manual(values = c(\"Females\" = \"#662633\", \"Males\" = \"#2C3C60\"))\n```\n\n::: {.cell-output-display}\n![](Take-Home_Ex01_2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n## üîß Improvement 1: What Was Improved\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngender_summary_long <- respop_cleaned %>%\n  group_by(Region, Sex) %>%\n  summarise(Total_Pop = sum(Pop), .groups = \"drop\") %>%\n  group_by(Region) %>%\n  mutate(\n    Region_Total = sum(Total_Pop),\n    Percent = (Total_Pop / Region_Total) * 100,\n    Label = paste0(round(Percent, 1), \"%\\n(\", scales::comma(Total_Pop), \")\")\n  )\n\n# Plot: stacked bar with % + population inside bars\nggplot(gender_summary_long, aes(x = Region, y = Percent, fill = Sex)) +\n  geom_col(position = \"stack\", width = 0.6) +\n\n  # Percentage + population inside each segment\n  geom_text(\n    aes(label = Label),\n    position = position_stack(vjust = 0.5),\n    color = \"white\",\n    size = 3, family = \"nunito\"\n  ) +\n\n  labs(\n    title = \"Gender Distribution by Region (2024)\",\n    subtitle = \"Each bar shows gender % and absolute population count\",\n    x = \"Region\",\n    y = \"Percentage (%)\",\n    fill = \"Gender\"\n  ) +\n  scale_y_continuous(labels = scales::percent_format(scale = 1)) +\n  scale_fill_manual(values = c(\"Females\" = \"#A93226\", \"Males\" = \"#2C3E50\")) +\n  theme_minimal(base_family = \"nunito\") +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    plot.title = element_text(hjust = 0.5, face = \"bold\", size = 15),\n    plot.subtitle = element_text(hjust = 0.5, size = 11)\n  )\n```\n\n::: {.cell-output-display}\n![](Take-Home_Ex01_2_files/figure-html/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\nThis revised visualisation enhance both analytical clarity and graphical integrity:\n\n### 1. From Absolute Counts to Proportional Comparison\n- **Original**: Displayed only raw population counts for each gender, which made it difficult to compare the gender distribution within each region.\n- **Improved**: Transformed into a **100% stacked bar chart** that normalises each region to 100%, making it much easier to compare **gender ratios** across regions.\n\n### 2. Embedded Dual-Level Information in Labels\n- **Original**: Included either percentage or total population as labels, but not both.\n- **Improved**: Combined both **percentage and absolute count** in each label (e.g., `48.7%\\n(123,456)`), allowing the viewer to simultaneously interpret **relative proportion and actual magnitude**.\n\n### 3. Improved Label Positioning and Readability\n- **Original**: Percentage labels were placed outside the bars, leading to overlapping and reduced clarity, especially for regions with similar male/female proportions.\n- **Improved**: Labels are now **placed inside the bar segments** using `position_stack(vjust = 0.5)`, increasing legibility and reducing visual clutter.\n\n### 4. Chart Type Aligns with Analytical Purpose\n- **Original**: Used a grouped bar chart, which is more appropriate for comparing absolute values across categories.\n- **Improved**: Switched to a **stacked bar layout**, which better supports the analytical objective of comparing **gender balance within each region**.\n\n### Improvement outlines\nThese improvements follow the visual design principles outlined in \n*Lesson 2: Designing Graphs to Enlighten*, particularly:\n\n- Using the **right chart to match the message**\n- Enhancing **interpretability** through derived metrics\n- Leveraging **pre-attentive features** like color and label placement\n\n## üîß Improvement Summary 2: What Was Further Improved\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngender_summary_long <- respop_cleaned %>%\n  group_by(Region, Sex) %>%\n  summarise(Total_Pop = sum(Pop), .groups = \"drop\") %>%\n  group_by(Region) %>%\n  mutate(\n    Region_Total = sum(Total_Pop),\n    Region_Percent = round((Total_Pop / Region_Total) * 100, 1),\n    Label = paste0(Region_Percent, \"%\\n(\", scales::comma(Total_Pop), \")\")\n  ) %>%\n  ungroup() %>%\n  mutate(\n    Region = fct_reorder(Region, Region_Total, .desc = TRUE),  # sort by Region_Total\n    Sex = factor(Sex, levels = c(\"Males\", \"Females\"))           # ensure stacking order\n  ) %>%\n  arrange(Region, Sex)  # ensure correct stacking order\n\n# Plot\nggplot(gender_summary_long, aes(y = Region, x = Total_Pop, fill = Sex)) +\n  geom_col(position = \"stack\", width = 0.6) +\n  geom_text(\n    aes(label = Label),\n    position = position_stack(vjust = 0.5),\n    color = \"white\",\n    size = 3,\n    family = \"nunito\"\n  ) +\n  labs(\n    title = \"Total Male and Female Population by Region (2024)\",\n    subtitle = \"Labels show % within each region and absolute population\",\n    x = \"Total Population\",\n    y = \"Region\",\n    fill = \"Gender\"\n  ) +\n  scale_x_continuous(\n    labels = scales::label_comma(),\n    breaks = seq(0, 1000000, 100000)\n  ) +\n  scale_fill_manual(values = c(\"Females\" = \"#A93226\", \"Males\" = \"#2C3E50\")) +\n  theme_minimal(base_family = \"nunito\") +\n  theme(\n    axis.text.y = element_text(size = 10),\n    plot.title = element_text(hjust = 0.5, face = \"bold\", size = 15),\n    plot.subtitle = element_text(hjust = 0.5, size = 11)\n  )\n```\n\n::: {.cell-output-display}\n![](Take-Home_Ex01_2_files/figure-html/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\nBuilding on the earlier stacked percentage chart, this updated visualisation improves the clarity, comparability, and contextual storytelling of the gender distribution across regions in 2024.\n\n### 1. Switched from Percentage to Actual Population on the X-Axis\n- **Previous**: X-axis showed gender **percentage share**, which helped with proportion comparison but hid the actual population scale.\n- **Improved**: Uses **raw population values** on the x-axis (with comma formatting and 100k breaks), enabling clear comparison of **both gender ratio and total population** per region.\n\n### 2. Horizontal Layout Enhances Label Readability and Comparison\n- **Previous**: Vertical bars made category names harder to read, and labels could overlap in crowded segments.\n- **Improved**: **Horizontal stacked bars** make region names easier to scan and reduce label collision, improving overall **legibility** and alignment with **natural left-to-right reading flow**.\n\n### 3. Regions Sorted by Total Population\n- **Previous**: Regions were presented in arbitrary or default order, which reduced analytical clarity.\n- **Improved**: Regions are now **sorted in descending order of total population**, highlighting population scale differences and making the chart easier to interpret at a glance.\n\n### 4. Maintained Rich, Dual-Layer Labels\n- Each bar segment still includes a **concise label** that combines the percentage share and absolute count (e.g., `50.5% (302,710)`), enabling multi-level insight in a compact, readable form.\n\n\nThese refinements not only retain the strengths of the previous version but enhance the visual‚Äôs ability to communicate both **structure (proportions)** and **magnitude (totals)** ‚Äî an important principle covered in *Lesson 2: Designing Graphs to Enlighten*.\n",
    "supporting": [
      "Take-Home_Ex01_2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}